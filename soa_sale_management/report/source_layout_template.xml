<?xml version="1.0" encoding="UTF-8" ?>
<odoo>
        <template id="rubio_external_layout_boxed">
        <div t-attf-class="header o_company_#{company.id}_layout" t-att-style="report_header_style">
            <div class="o_boxed_header" style="padding-top: 20px; padding-bottom: 20px" >
                <div class="row" style="font-size: 10px;">
                    <div class="col-4 text-start">
                    </div>
                    <div class="col-2 text-end" style="padding: 0px 5px">
                        VN Office:
                    </div>
                    <div class="col-6 text-start" style="padding: 0px 5px">
                        <div>
                            <ul class="list-unstyled" >
                                <li><strong t-field="company.partner_id.display_name"/></li>
                                <li style="word-wrap: normal"><span t-field="company.partner_id.street"/></li>
                                <li>Tax Code: <span t-field="company.partner_id.vat"/></li>
                                <li><span t-field="company.partner_id.email"/></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div t-attf-class="article o_company_#{company.id}_layout {{  'o_report_layout_background' if company.layout_background in ['Geometric', 'Custom']  else  '' }}" t-attf-style="background-image: url({{ 'data:image/png;base64,%s' % company.layout_background_image.decode('utf-8') if company.layout_background_image and company.layout_background == 'Custom' else '/base/static/img/bg_background_template.jpg' if company.layout_background == 'Geometric' else ''}});" t-att-data-oe-model="o and o._name" t-att-data-oe-id="o and o.id" t-att-data-oe-lang="o and o.env.context.get('lang')">
            <div style="margin-top: 20px; height: 20px; background-color: #FFFFFF">
            </div>
            <t t-out="0"/>
        </div>

    </template>

    <template id="rubio_external_layout">
        <t t-if="not o" t-set="o" t-value="doc"/>

        <t t-if="not company">
            <!-- Multicompany -->
            <t t-if="company_id">
                <t t-set="company" t-value="company_id"/>
            </t>
            <t t-elif="o and 'company_id' in o and o.company_id.sudo()">
                <t t-set="company" t-value="o.company_id.sudo()"/>
            </t>
            <t t-else="else">
                <t t-set="company" t-value="res_company"/>
            </t>
        </t>
        <t t-call="soa_sale_management.rubio_external_layout_boxed"><t t-out="0"/></t>
    </template>

    <!-- clone from base template document_tax_totals_template -->
    <template id="rubio_document_tax_totals_template">
        <!--
            Generic template to display tax totals in pdf reports.
            Used by invoices, SO and PO.
            ARGUMENTS:
            - tax_totals: dict in the form generated by account.move's _get_tax_totals.
        -->
<!--        <t t-foreach="tax_totals['subtotals']" t-as="subtotal">-->
<!--            <tr class="o_subtotal" style="border: solid 1px black;">-->
<!--                <td width="90%" colspan="4" style="border: solid 1px black;text-align: right !important; padding: 0px 5px">-->
<!--                    <p><strong><t t-out="subtotal['name']"/> (<t t-esc="doc.currency_id.name"/>)</strong></p>-->
<!--                    <p><i>TỔNG THÀNH TIỀN (<t t-esc="doc.currency_id.name"/>)</i></p>-->
<!--                </td>-->
<!--                <td width="10%" style="border: solid 1px black; text-align: center">-->
<!--                    <span-->
<!--                        t-att-class="oe_subtotal_footer_separator"-->
<!--                        t-out="subtotal['formatted_amount']"-->
<!--                    />-->
<!--                </td>-->
<!--            </tr>-->

<!--            <t t-set="subtotal_to_show" t-value="subtotal['name']"/>-->
<!--            <t t-call="soa_sale_management.rubio_tax_groups_totals"/>-->
<!--        </t>-->

<!--        <tr t-if="'formatted_rounding_amount' in tax_totals and tax_totals['rounding_amount'] != 0">-->
<!--            <td>Rounding</td>-->
<!--            <td class="text-end">-->
<!--                <span t-out="tax_totals['formatted_rounding_amount']">0</span>-->
<!--            </td>-->
<!--        </tr>-->

        <!--Total amount with all taxes-->
        <tr class="border-black">
            <td width="85%" colspan="4" style="border: solid 1px black; text-align: right !important; padding: 0px 5px">
                <p><strong>TOTAL AMOUNT TO PAY (<t t-esc="doc.currency_id.name"/>)</strong></p>
                <p><i>TỔNG TIỀN THANH TOÁN (<t t-esc="doc.currency_id.name"/>)</i></p>
            </td>
            <td width="15%" style="border: solid 1px black; text-align: center; vertical-align: middle;">
                <span t-out="tax_totals['formatted_amount_total']"/>
            </td>
        </tr>
    </template>

        <!-- clone from base template tax_groups_totals -->
    <template id="rubio_tax_groups_totals">
        <!--
            Generic template to display a list of tax groups with the related amounts.
            ARGUMENTS:
            - tax_totals: dict in the form generated by account.move's _get_tax_totals.
            - subtotal_to_show: The subtotal we need to render the groups from
        -->
        <t t-foreach="tax_totals['groups_by_subtotal'][subtotal_to_show]" t-as="amount_by_group">
            <t t-set="display_tax_base" t-value="tax_totals['display_tax_base']"/>
            <tr style="border: solid 1px black;">
                <t t-if="not display_tax_base">
                    <td width="90%" colspan="4" style="border: solid 1px black; text-align: right !important; padding: 0px 5px" class="text-end td-middle">
                        <span class="text-nowrap" t-out="amount_by_group['tax_group_name']">Tax 15%</span>
                    </td>
                    <td width="10%" style="border: solid 1px black; text-align: center" class="o_price_total td-middle">
                        <span class="text-nowrap" t-out="amount_by_group['formatted_tax_group_amount']">1.05</span>
                    </td>
                </t>
                <t t-else="">
                    <td width="90%" colspan="4" style="border: solid 1px black;" class="text-end td-middle">
                        <span t-out="amount_by_group['tax_group_name']">Tax 15%</span>
                         on
                        <span class="text-nowrap" t-out="amount_by_group['formatted_tax_group_base_amount']">27.00</span>
                    </td>
                    <td width="10%" class="o_price_total" style="border: solid 1px black; text-align: center">
                        <span class="text-nowrap" t-out="amount_by_group['formatted_tax_group_amount']">4.05</span>
                    </td>
                </t>
            </tr>
        </t>
    </template>

</odoo>